var AngularApp=angular.module("AngularApp",["ngSanitize","ngRoute","ngAnimate","ngMessages","ui.bootstrap","contenteditable"]);AngularApp.run(["$rootScope","$http","$ui",function(t,e,n){e.get("angular/meta.json").success(function(e){t.AppName=e.name,t.AppVersion=e.version,t.AppDescription=e.description,t.AppCopyright=e.copyright,t.AppAuthors=e.authors}),t.PageName="Home",t.$ui=n}]).run(["$rootScope","$location",function(t,e){t.$on("$routeChangeError",function(){e.url("/")}),t.$ui.Ready(function(){Date.prototype.toJSON=function(){return new Date(this.getTime()-6e4*this.getTimezoneOffset()).toISOString()}})}]),AngularApp.config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/home/index.html"}).when("/:base/:sub",{templateUrl:function(t){return"views/"+t.base+"/"+t.sub+".html"}}).when("/:base",{templateUrl:function(t){return"views/"+t.base+"/index.html"}})}]).config(["$locationProvider",function(t){t.html5Mode(!1)}]),AngularApp.controller("DiffCtrl",["$scope","$sce","$diffr",function(t,e,n){t.DiffText={Left:"",Right:""},t.Differentiate=function(){var r=t.DiffText.Left,i=t.DiffText.Right;if(null!==r&&null!==i){var a=n.Diff(r,i);t.DiffResults={Left:e.trustAsHtml(a.Left),Right:e.trustAsHtml(a.Right)},console.log(a)}}}]),AngularApp.service("$ui",["$timeout",function(t){this.Ready=function(t){angular.element(document).ready(t)}}]),AngularApp.service("diffrHelpers",function(){var t=this;t.ProcessHtml=function(t){var e=$("<div>"+t+"</div>");return e.find("br").replaceWith("\n"),e.text()},t.ParseDiffToHtml=function(t){if(0===t.length)return"";for(var e="",n=0;n<t.length;n++){var r=t[n];if(r.match===!1){e+="<div style='background:#fee'>";for(var i=0;i<r.matchMap.length;i++)e+=r.matchMap[i]===!0?r.text[i]:"<span style='color:red'>"+(r.text[i]||"")+"</span>";e+="</div>"}else e+=r.text}return e}}),AngularApp.service("$diffr",["diffrHelpers",function(t){var e=this;e.Diff=function(n,r){var i=t.ProcessHtml(n),a=t.ProcessHtml(r);return e.Differentiate(i,a)},e.Differentiate=function(n,r){var i=e.GetDiffLines(n),a=e.GetDiffLines(r),f=Math.max(i.length,a.length);if(0===f)return{Left:"",Right:""};for(var o=0;f>o;o++){i[o]=i[o]||{text:""},a[o]=a[o]||{text:""};var u=i[o],s=a[o];e.DiffLine(u,s)}return{Left:t.ParseDiffToHtml(i),Right:t.ParseDiffToHtml(a)}},e.DiffLine=function(t,e){if(t.text!==e.text){t.match=!1,e.match=!1;var n=Math.max(t.text.length,e.text.length);if(0!==n){t.matchMap=[],e.matchMap=[];for(var r=0;n>r;r++){var i=t.text[r],a=e.text[r];i===a?(t.matchMap.push(!0),e.matchMap.push(!0)):(t.matchMap.push(!1),e.matchMap.push(!1))}}}},e.GetDiffLines=function(t){if(!t)return[];for(var e=t.toString().split("\n"),n=[],r=0;r<e.length;r++){var i=e[r];n.push({text:i})}return n}}]);